{"ast":null,"code":"import RegisterNewUser from \"@/components/RegisterNewUser.vue\";\nimport RegisterGP from \"@/components/RegisterGP.vue\";\nimport RegisterPS from \"@/components/RegisterPS.vue\";\nimport axios from 'axios'; // ... (import other components)\n\nexport default {\n  name: 'DashboardPage',\n  components: {\n    RegisterNewUser,\n    RegisterGP,\n    RegisterPS\n    // ... (other components)\n  },\n\n  data() {\n    return {\n      selectedOption: null,\n      users: [] // Initialize an empty array to store users\n    };\n  },\n\n  computed: {\n    selectedOptionComponent() {\n      return this.selectedOption === 'user' ? 'RegisterNewUser' : this.selectedOption === 'gram' ? 'RegisterGP' : this.selectedOption === 'panchayat' ? 'RegisterPS' : null;\n    }\n  },\n  methods: {\n    selectOption(option) {\n      localStorage.removeItem('edituser');\n      this.selectedOption = option;\n    },\n    reloadUserData() {\n      this.fetchUsers();\n    },\n    deleteUser(userId) {\n      const jsonData = {\n        id: userId\n      };\n      axios.post('http://127.0.0.1:5555/deleteAdmin', jsonData, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        // Handle successful deletion\n        const deletedUserId = response.data.id;\n        console.log(`User with ID ${deletedUserId} has been deleted.`);\n\n        // Remove the deleted user from the frontend\n        this.users = this.users.filter(user => user.id !== userId);\n        this.reloadUserData();\n      }).catch(error => {\n        // Handle error\n        console.error('Error deleting user:', error);\n      });\n    },\n    fetchUsers() {\n      axios.get('http://127.0.0.1:5555/GetAdmin').then(users => this.users = users.data).catch(error => console.error('Error:', error));\n    },\n    selectUserForEdit(userId) {\n      this.selectedOption = 'user'; // Set the selectedOption to 'user'\n      this.selectedUserId = userId; // Store the selected user ID\n      localStorage.setItem('edituser', this.selectedUserId);\n    },\n    goBackFromChild() {\n      this.selectedOption = null;\n      this.reloadUserData();\n    }\n  },\n  mounted() {\n    this.fetchUsers(); // Fetch users when the component is mounted\n  }\n};","map":{"version":3,"names":["RegisterNewUser","RegisterGP","RegisterPS","axios","name","components","data","selectedOption","users","computed","selectedOptionComponent","methods","selectOption","option","localStorage","removeItem","reloadUserData","fetchUsers","deleteUser","userId","jsonData","id","post","headers","then","response","deletedUserId","console","log","filter","user","catch","error","get","selectUserForEdit","selectedUserId","setItem","goBackFromChild","mounted"],"sources":["C:\\xampp\\htdocs\\PSPM\\Final-Project\\src\\components\\AdministrationPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard\">\r\n    <div v-if=\"selectedOption === null\" class=\"dashboard-options\">\r\n      <div @click=\"selectOption('user')\" class=\"btn btn-info mb-4 text-white\"><i class=\"fa-solid fa-plus me-2\"></i>Add New User</div>\r\n      <div id=\"userTable mt-3\">\r\n        <table class=\"table table-striped\">\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Name</th>\r\n              <th>User Name</th>\r\n              <th>Password</th>\r\n              <th>Email</th>\r\n              <th>Phone</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(user, index) in users\" :key=\"user.id\">\r\n              <td>{{ ++index }}</td>\r\n              <td>{{ user.ncharFullName }}</td>\r\n              <td>{{ user.ncharUsername }}</td>\r\n              <td>{{ user.ncharPassword }}</td>\r\n              <td>{{ user.ncharEmail }}</td>\r\n              <td>{{ user.ncharMobileNumber }}</td>\r\n              <td>\r\n                <button class=\"btn btn-sm rounded btn-info me-2\" @click=\"selectUserForEdit(user.id)\"><i class=\"fa-solid fa-pen-to-square text-white\"></i></button>\r\n                <button class=\"btn btn-sm rounded btn-danger\" @click=\"deleteUser(user.id)\"><i class=\"fa-solid fa-trash-can\"></i></button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <component :is=\"selectedOptionComponent\" @go-back=\"goBackFromChild\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RegisterNewUser from \"@/components/RegisterNewUser.vue\";\r\nimport RegisterGP from \"@/components/RegisterGP.vue\";\r\nimport RegisterPS from \"@/components/RegisterPS.vue\";\r\nimport axios from 'axios';// ... (import other components)\r\n\r\nexport default {\r\n  name: 'DashboardPage',\r\n  components: {\r\n    RegisterNewUser,\r\n    RegisterGP,\r\n    RegisterPS,\r\n    // ... (other components)\r\n  },\r\n  data() {\r\n    return {\r\n      selectedOption: null,\r\n      users: [], // Initialize an empty array to store users\r\n    };\r\n  },\r\n  computed: {\r\n    selectedOptionComponent() {\r\n      return this.selectedOption === 'user'\r\n        ? 'RegisterNewUser'\r\n        : this.selectedOption === 'gram'\r\n        ? 'RegisterGP'\r\n        : this.selectedOption === 'panchayat'\r\n        ? 'RegisterPS'\r\n        : null;\r\n    }\r\n  },\r\n  methods: {\r\n    selectOption(option)\r\n    {\r\n      localStorage.removeItem('edituser');\r\n      this.selectedOption = option;\r\n    },\r\n    reloadUserData() {\r\n      this.fetchUsers();\r\n    },\r\n    deleteUser(userId)\r\n    {\r\n      const jsonData = {id: userId};\r\n\r\n      axios.post('http://127.0.0.1:5555/deleteAdmin', jsonData,{headers: {'Content-Type': 'application/json'}})\r\n      .then(response => {\r\n        // Handle successful deletion\r\n        const deletedUserId = response.data.id;\r\n        console.log(`User with ID ${deletedUserId} has been deleted.`);\r\n\r\n        // Remove the deleted user from the frontend\r\n        this.users = this.users.filter(user => user.id !== userId);\r\n        this.reloadUserData();\r\n\r\n      })\r\n      .catch(error => {\r\n        // Handle error\r\n        console.error('Error deleting user:', error);\r\n      });\r\n    },\r\n    fetchUsers()\r\n    {\r\n      axios.get('http://127.0.0.1:5555/GetAdmin')\r\n        .then(users => this.users = users.data)\r\n        .catch(error => console.error('Error:', error));\r\n    },\r\n    selectUserForEdit(userId)\r\n    {\r\n      this.selectedOption = 'user'; // Set the selectedOption to 'user'\r\n      this.selectedUserId = userId; // Store the selected user ID\r\n      localStorage.setItem('edituser',this.selectedUserId);\r\n    },\r\n\r\n    goBackFromChild()\r\n    {\r\n      this.selectedOption = null;\r\n      this.reloadUserData();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchUsers(); // Fetch users when the component is mounted\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard {\r\n  padding: 40px;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 0 2px var(--grey-color-light);\r\n}\r\n\r\n.dashboard-block {\r\n  background-color: #ffffff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  cursor: pointer;\r\n  transition: transform 0.2s, box-shadow 0.2s;\r\n}\r\n\r\n.dashboard-block:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.block-content {\r\n  text-align: center;\r\n}\r\n\r\n.block-content h2 {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  color: #333;\r\n}\r\n</style>"],"mappings":"AA0CA,OAAOA,eAAc,MAAO,kCAAkC;AAC9D,OAAOC,UAAS,MAAO,6BAA6B;AACpD,OAAOC,UAAS,MAAO,6BAA6B;AACpD,OAAOC,KAAI,MAAO,OAAO,CAAC;;AAE1B,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACVL,eAAe;IACfC,UAAU;IACVC;IACA;EACF,CAAC;;EACDI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,cAAc,EAAE,IAAI;MACpBC,KAAK,EAAE,EAAE,CAAE;IACb,CAAC;EACH,CAAC;;EACDC,QAAQ,EAAE;IACRC,uBAAuBA,CAAA,EAAG;MACxB,OAAO,IAAI,CAACH,cAAa,KAAM,MAAK,GAChC,iBAAgB,GAChB,IAAI,CAACA,cAAa,KAAM,MAAK,GAC7B,YAAW,GACX,IAAI,CAACA,cAAa,KAAM,WAAU,GAClC,YAAW,GACX,IAAI;IACV;EACF,CAAC;EACDI,OAAO,EAAE;IACPC,YAAYA,CAACC,MAAM,EACnB;MACEC,YAAY,CAACC,UAAU,CAAC,UAAU,CAAC;MACnC,IAAI,CAACR,cAAa,GAAIM,MAAM;IAC9B,CAAC;IACDG,cAAcA,CAAA,EAAG;MACf,IAAI,CAACC,UAAU,CAAC,CAAC;IACnB,CAAC;IACDC,UAAUA,CAACC,MAAM,EACjB;MACE,MAAMC,QAAO,GAAI;QAACC,EAAE,EAAEF;MAAM,CAAC;MAE7BhB,KAAK,CAACmB,IAAI,CAAC,mCAAmC,EAAEF,QAAQ,EAAC;QAACG,OAAO,EAAE;UAAC,cAAc,EAAE;QAAkB;MAAC,CAAC,EACvGC,IAAI,CAACC,QAAO,IAAK;QAChB;QACA,MAAMC,aAAY,GAAID,QAAQ,CAACnB,IAAI,CAACe,EAAE;QACtCM,OAAO,CAACC,GAAG,CAAE,gBAAeF,aAAa,oBAAoB,CAAC;;QAE9D;QACA,IAAI,CAAClB,KAAI,GAAI,IAAI,CAACA,KAAK,CAACqB,MAAM,CAACC,IAAG,IAAKA,IAAI,CAACT,EAAC,KAAMF,MAAM,CAAC;QAC1D,IAAI,CAACH,cAAc,CAAC,CAAC;MAEvB,CAAC,EACAe,KAAK,CAACC,KAAI,IAAK;QACd;QACAL,OAAO,CAACK,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,CAAC;IACJ,CAAC;IACDf,UAAUA,CAAA,EACV;MACEd,KAAK,CAAC8B,GAAG,CAAC,gCAAgC,EACvCT,IAAI,CAAChB,KAAI,IAAK,IAAI,CAACA,KAAI,GAAIA,KAAK,CAACF,IAAI,EACrCyB,KAAK,CAACC,KAAI,IAAKL,OAAO,CAACK,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC,CAAC;IACnD,CAAC;IACDE,iBAAiBA,CAACf,MAAM,EACxB;MACE,IAAI,CAACZ,cAAa,GAAI,MAAM,EAAE;MAC9B,IAAI,CAAC4B,cAAa,GAAIhB,MAAM,EAAE;MAC9BL,YAAY,CAACsB,OAAO,CAAC,UAAU,EAAC,IAAI,CAACD,cAAc,CAAC;IACtD,CAAC;IAEDE,eAAeA,CAAA,EACf;MACE,IAAI,CAAC9B,cAAa,GAAI,IAAI;MAC1B,IAAI,CAACS,cAAc,CAAC,CAAC;IACvB;EACF,CAAC;EACDsB,OAAOA,CAAA,EAAG;IACR,IAAI,CAACrB,UAAU,CAAC,CAAC,EAAE;EACrB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}